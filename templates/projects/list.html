{% extends "layout.html" %}
{% block title %}Projects{% endblock %}

{% block main %}
    <!-- Title -->
    <div class="d-flex align-items-center mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
            fill="rgb(13, 110, 253)" class="pe-none me-3" viewBox="0 0 256 256">
            <path d="M88,180a12,12,0,1,1-12-12A12,12,0,0,1,88,180Zm152-23.81V208a16,16,0,0,1-16,16H76a46.36,46.36,0,0,1-7.94-.68,44,44,0,0,1-35.43-50.95l25-143.13a15.94,15.94,0,0,1,18.47-13L130.84,26a16,16,0,0,1,12.92,18.52l-12.08,69L199.49,89a16,16,0,0,1,20.45,9.52L239,150.69A18.35,18.35,0,0,1,240,156.19ZM103,184.87,128,41.74,73.46,32l-25,143.1A28,28,0,0,0,70.9,207.57,27.29,27.29,0,0,0,91.46,203,27.84,27.84,0,0,0,103,184.87ZM116.78,195,224,156.11,204.92,104,128.5,131.7l-9.78,55.92A44.63,44.63,0,0,1,116.78,195ZM224,173.12,127.74,208H224Z"></path>
        </svg>
        <h2 class="text-primary mb-0">Projects</h2>
    </div>

    <hr>

    <!-- Actions: Add + Search -->
    <div class="row my-2 p-2 gy-3">
        <div class="col-12 col-md-6 mb-3 mb-md-0 d-flex justify-content-start">
            <a href="{{ url_for('new_project') }}" class="btn btn-primary">
                Add Project
            </a>
        </div>

        <div class="col-12 col-md-6 d-flex justify-content-end">
            <div class="position-relative search-box">
                <input id="projectSearch" type="text" class="form-control ps-5" placeholder="Search projects...">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                    class="position-absolute top-50 start-0 translate-middle-y ms-3 text-primary"
                    viewBox="0 0 256 256">
                    <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
                </svg>
            </div>
        </div>
    </div>

    <!-- Table -->
    <div class="table-responsive flex-grow-1">
        <table class="table table-hover align-middle">
            <thead class="table-light">
                <tr>
                    <th class="text-primary">Project</th>
                    <th class="text-primary">Client</th>
                    <th class="text-primary">Status</th>
                    <th class="text-primary">Due date</th>
                    <th class="text-primary">Actions</th>
                </tr>
            </thead>
            <tbody id="projectsTbody">
                {% for project in projects %}
                <tr>
                    <td>{{ project['name'] }}</td>
                    <td>
                        <a href="{{ url_for('client_detail', client_id=project['client_id']) }}">
                            {{ project['client_name'] }}
                        </a>
                    </td>
                    <td>
                        {% if project['status'] == "Completed" %}
                            <span class="badge bg-success">{{ project['status'] }}</span>
                        {% elif project['status'] == "In Progress" %}
                            <span class="badge bg-warning text-dark">{{ project['status'] }}</span>
                        {% elif project['status'] == "Pending" %}
                            <span class="badge bg-secondary">{{ project['status'] }}</span>
                        {% else %}
                            <span class="badge bg-light text-dark">{{ project['status'] }}</span>
                        {% endif %}
                    </td>
                    <td>{{ project.due_date or '-' }}</td>
                    <td>
                        <a href="{{ url_for('project_detail', project_id=project['id']) }}"
                           class="btn btn-sm btn-outline-primary">
                            View
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>


{% endblock %}
